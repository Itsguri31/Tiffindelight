<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:Tiffindelight.ViewModels"
             x:Class="Tiffindelight.Views.HomePage"
             Title="HomePage">
    <ContentPage.BindingContext>
        <viewmodels:HomePageViewModel>
        </viewmodels:HomePageViewModel>
    </ContentPage.BindingContext>

    <!-- ScrollView to enable scrolling -->
    <ScrollView>

        <VerticalStackLayout Padding="10">
            
                
                <!-- Title Label -->
            <Label Text="Tiffin DelightðŸ‘¨â€ðŸ³" 
                   FontSize="32" 
                   FontAttributes="Bold" 
                   HorizontalOptions="Center" 
                   VerticalOptions="Center" 
                   Margin="0,20,0,10"
                   FontFamily="Brush Script MT" />

            <!-- Search Bar -->
            <SearchBar Placeholder="Search food items..." 
                       Text="{Binding SearchQuery}" 
                       SearchCommand="{Binding SearchCommand}"
                       HorizontalOptions="FillAndExpand"
                       Margin="0,20,0,10" />
            

            <Label Text="Today's Special" 
                   FontSize="Large" 
                   FontAttributes="Bold" 
                   HorizontalOptions="Center" 
                   Margin="0,10,0,10" />

            <!-- Food Items CollectionView -->
            <CollectionView ItemsSource="{Binding FilteredFoodItems}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame BorderColor="Black" CornerRadius="10" Padding="10" Margin="0,10">
                            <VerticalStackLayout>
                                <Image Source="{Binding ImageUrl}" 
                                       WidthRequest="80" 
                                       HeightRequest="80" 
                                       Aspect="AspectFill"
                                       HorizontalOptions="Center" 
                                       VerticalOptions="Center" />

                                <Label Text="{Binding Name}" 
                                       FontSize="Medium" 
                                       FontAttributes="Bold"
                                       HorizontalOptions="Center" 
                                       Margin="0,5,0,0" />

                                <Label Text="{Binding Description}" 
                                       FontSize="Small" 
                                       TextColor="Gray" 
                                       LineBreakMode="TailTruncation"
                                       HorizontalOptions="Center" 
                                       Margin="0,5,0,0" />
                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- Button to View All Items -->
            <Button Text="View All Items"
                    BackgroundColor="Black"
                    TextColor="White"
                    HorizontalOptions="Center"
                    Command="{Binding ViewAllItemsCommand}" 
                    Margin="0,20,0,10" />

            <!-- Admin Dashboard Section -->
            <Label Text="Admin Dashboard" 
                   FontSize="Large" 
                   FontAttributes="Bold" 
                   HorizontalOptions="Center" 
                   Margin="0,30,0,10" />

            <Frame BorderColor="LightGray" CornerRadius="10" Padding="10" Margin="0,10">
                <StackLayout>
                    <Button Text="Manage Tiffin Menus"
                            BackgroundColor="Grey"
                            TextColor="White"
                            Command="{Binding ManageMenusCommand}"
                            Margin="0,5,0,5"/>
                    <Button Text="Manage Orders"
                            BackgroundColor="Grey"
                            TextColor="White"
                            Command="{Binding ManageOrdersCommand}"
                            Margin="0,5,0,5"/>
                    <Button Text="Manage Users"
                            BackgroundColor="Grey"
                            TextColor="White"
                            Command="{Binding ManageUsersCommand}"
                            Margin="0,5,0,5"/>
                </StackLayout>
            </Frame>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
    